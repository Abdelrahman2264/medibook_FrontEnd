<div class="signin-page">
  <div class="signin-container">
    <div class="signin-left">
      <div class="illustration">
        <div class="medical-icon"></div>
        <h2>Welcome Back to MediBook</h2>
        <p>Access your medical appointments and healthcare services</p>
        <div class="features">
          <div class="feature">
            <span class="feature-icon"></span>
            <span>Manage your appointments</span>
          </div>
          <div class="feature">
            <span class="feature-icon"></span>
            <span>Access medical records</span>
          </div>
          <div class="feature">
            <span class="feature-icon"></span>
            <span>Connect with doctors</span>
          </div>
        </div>
      </div>
    </div>

    <div class="signin-right">
      <div class="signin-form-container">
        <div class="form-header">
          <h1>Sign In</h1>
          <p>Enter your credentials to access your account</p>
        </div>

        <form class="signin-form" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <label for="email">Email Address <span class="required-asterisk">*</span></label>
            <div class="input-container">
              <i class="fas fa-envelope input-icon"></i>
              <input 
                type="email" 
                id="email" 
                placeholder="Enter your email"
                [(ngModel)]="credentials.email"
                name="email"
                [class.error-input]="fieldErrors.email && shouldShowError('email')"
                (input)="onFieldInput('email')"
                required>
            </div>
            <div class="field-error" *ngIf="fieldErrors.email && shouldShowError('email')">
              <i class="fas fa-exclamation-circle"></i> {{ fieldErrors.email }}
            </div>
          </div>

          <div class="form-group">
            <div class="label-container">
              <label for="password">Password <span class="required-asterisk">*</span></label>
              <a (click)="openForgetPasswordModal()" class="forgot-link" style="cursor: pointer;">Forgot Password?</a>
            </div>
            <div class="input-container">
              <i class="fas fa-lock input-icon"></i>
              <input 
                [type]="showPassword ? 'text' : 'password'" 
                id="password" 
                placeholder="Enter your password"
                [(ngModel)]="credentials.password"
                name="password"
                [class.error-input]="fieldErrors.password && shouldShowError('password')"
                (input)="onFieldInput('password')"
                required>
                 <button type="button" class="password-toggle" (click)="togglePassword()">
                <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
              </button>
            </div>
            <div class="field-error" *ngIf="fieldErrors.password && shouldShowError('password')">
              <i class="fas fa-exclamation-circle"></i> {{ fieldErrors.password }}
            </div>
          </div>

          <div class="form-options">
            <label class="checkbox-container">
              <input type="checkbox" [(ngModel)]="rememberMe" name="rememberMe">
              <span class="checkmark"></span>
              Remember me
            </label>
          </div>

          <div *ngIf="errorMessage" class="error-message">
            <i class="fas fa-exclamation-circle"></i>
            {{ errorMessage }}
          </div>

          <button type="submit" class="signin-btn" [disabled]="isLoading">
            <span *ngIf="!isLoading">Sign In</span>
            <div *ngIf="isLoading" class="loading-spinner"></div>
          </button>

          
          <div class="signup-link">
            Don't have an account? <a routerLink="/signup" class="link">Sign Up</a>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Forget Password Modal -->
  <app-forget-password-modal
    [isVisible]="showForgetPasswordModal"
    (close)="closeForgetPasswordModal()"
    (success)="onPasswordResetSuccess()">
  </app-forget-password-modal>
</div>